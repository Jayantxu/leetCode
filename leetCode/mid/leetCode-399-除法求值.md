*åŽŸé¢˜é“¾æŽ¥ï¼šðŸ‘‰ï¼š[é™¤æ³•æ±‚å€¼](https://leetcode-cn.com/problems/evaluate-division/description/)*

é¢˜ç›®æè¿°:

1. '[["a","c"],["b","a"],["a","e"],["a","a"],["x","x"]]'
ç»™ä½ ä¸€ä¸ªå˜é‡å¯¹æ•°ç»„ equations å’Œä¸€ä¸ªå®žæ•°å€¼æ•°ç»„ values ä½œä¸ºå·²çŸ¥æ¡ä»¶ï¼Œå…¶ä¸­ equations[i] = [Ai, Bi] å’Œ values[i] å…±åŒè¡¨ç¤ºç­‰å¼ Ai / Bi = values[i] ã€‚æ¯ä¸ª Ai æˆ– Bi æ˜¯ä¸€ä¸ªè¡¨ç¤ºå•ä¸ªå˜é‡çš„å­—ç¬¦ä¸²ã€‚

2. å¦æœ‰ä¸€äº›ä»¥æ•°ç»„ queries è¡¨ç¤ºçš„é—®é¢˜ï¼Œå…¶ä¸­ queries[j] = [Cj, Dj] è¡¨ç¤ºç¬¬ j ä¸ªé—®é¢˜ï¼Œè¯·ä½ æ ¹æ®å·²çŸ¥æ¡ä»¶æ‰¾å‡º Cj / Dj = ? çš„ç»“æžœä½œä¸ºç­”æ¡ˆã€‚

3. è¿”å›ž æ‰€æœ‰é—®é¢˜çš„ç­”æ¡ˆ ã€‚å¦‚æžœå­˜åœ¨æŸä¸ªæ— æ³•ç¡®å®šçš„ç­”æ¡ˆï¼Œåˆ™ç”¨ -1.0 æ›¿ä»£è¿™ä¸ªç­”æ¡ˆã€‚å¦‚æžœé—®é¢˜ä¸­å‡ºçŽ°äº†ç»™å®šçš„å·²çŸ¥æ¡ä»¶ä¸­æ²¡æœ‰å‡ºçŽ°çš„å­—ç¬¦ä¸²ï¼Œä¹Ÿéœ€è¦ç”¨ -1.0 æ›¿ä»£è¿™ä¸ªç­”æ¡ˆã€‚

4. æ³¨æ„ï¼šè¾“å…¥æ€»æ˜¯æœ‰æ•ˆçš„ã€‚ä½ å¯ä»¥å‡è®¾é™¤æ³•è¿ç®—ä¸­ä¸ä¼šå‡ºçŽ°é™¤æ•°ä¸º 0 çš„æƒ…å†µï¼Œä¸”ä¸å­˜åœ¨ä»»ä½•çŸ›ç›¾çš„ç»“æžœã€‚

ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥ï¼šequations = [["a","b"],["b","c"]], values = [2.0,3.0], queries = [["a","c"],["b","a"],["a","e"],["a","a"],["x","x"]]
è¾“å‡ºï¼š[6.00000,0.50000,-1.00000,1.00000,-1.00000]
è§£é‡Šï¼š
æ¡ä»¶ï¼ša / b = 2.0, b / c = 3.0
é—®é¢˜ï¼ša / c = ?, b / a = ?, a / e = ?, a / a = ?, x / x = ?
ç»“æžœï¼š[6.0, 0.5, -1.0, 1.0, -1.0 ]
```

ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥ï¼šequations = [["a","b"],["b","c"],["bc","cd"]], values = [1.5,2.5,5.0], queries = [["a","c"],["c","b"],["bc","cd"],["cd","bc"]]
è¾“å‡ºï¼š[3.75000,0.40000,5.00000,0.20000]
```

ç¤ºä¾‹ 3ï¼š
```
è¾“å…¥ï¼šequations = [["a","b"]], values = [0.5], queries = [["a","b"],["b","a"],["a","c"],["x","y"]]
è¾“å‡ºï¼š[0.50000,2.00000,-1.00000,-1.00000]
```

æ€è·¯ï¼š

> è‰ç¨¿ç”»äº†ç”»ï¼ŒçŸ¥é“åº”è¯¥æž„å»ºäº’ç›¸ä¹‹é—´çš„å…³ç³»ï¼Œä½†æ˜¯ä¸€ä¸‹å­ä¸çŸ¥é“ç”¨ä»€ä¹ˆå½¢å¼å­˜å‚¨å’Œå¯»æ‰¾...

- é¢˜è§£

> ä½¿ç”¨`map`æž„å»ºå›¾ï¼Œæ¯ä¸€ä¸ªå­—ç¬¦ä½œä¸º`key`ï¼Œ`value`å­˜å‚¨æœ‰å…³ç³»çš„èŠ‚ç‚¹åŠè·¯å¾„æƒå€¼ç»„æˆçš„æ•°ç»„ï¼Œä¾‹å¦‚ï¼š

```
1: [ [a, b], [b, c] ]
// è½¬æ¢åŽ
{
    a: [
        [b, 2]
    ],
    b: [
        [a, 0.5],
        [c, 2]
    ],
    c: [
        [b, 0.5]
    ]
}
```

è¿™æ ·çš„å½¢å¼ï¼Œç„¶åŽåœ¨ä¾æ®æ­¤è¿›è¡Œæ·±åº¦éåŽ†å†æŸ¥æ‰¾ï¼ŒåŒæ—¶ä¸ºäº†é¿å…é™·å…¥å¾ªçŽ¯ï¼Œä¾‹å¦‚ï¼š
```
æ±‚ a / c ï¼Ÿ

a -> b -> c

```
æ‰¾åˆ°aï¼Œ å†æ‰¾ bï¼Œ bçš„æ•°ç»„ä¸­æœ‰aï¼Œå› æ­¤ä¸èƒ½å–aï¼Œæ‰€ä»¥åº”è¯¥æœ‰ä¸€ä¸ªæ ‡è¯†é˜²æ­¢ã€‚å› æ­¤å»ºç«‹äº†ä¸€ä¸ª`visitMap`å­˜å‚¨`key`ç”¨äºŽåˆ¤æ–­ã€‚



**code**

```
var calcEquation = function(equations, values, queries) {
    let eMap = new Map(), // ä¿å­˜å€¼ä¹‹é—´çš„æ˜ å°„å…³ç³»ä¸Žè·¯å¾„å€¼
        resArr = [], // ä¿å­˜ç»“æžœæ•°ç»„
        visitMap = new Map(); // å†å‘ä¸‹æ’°å–çš„è¿‡ç¨‹ä¸­è®°å½•æ˜¯å¦è®¿é—®è¿‡ï¼Œé¿å…é™·å…¥å¾ªçŽ¯
    // æ·±åº¦éåŽ†
    const dfsFind = (nowKey, aimKey) => {
        if(nowKey === aimKey) {
            return 1;
        }
        let nowKeyArr = eMap.get(nowKey);
        for(let i = 0; i < nowKeyArr.length; i++) {
            // æ‰¾åˆ°è¯¥é”®çš„æ˜ å°„çš„valueæ•°ç»„
            let nowArr = nowKeyArr[i];
            if(!visitMap.get(nowArr[0])) {
                // è®¾ä¸ºtrueï¼Œé¿å…åŽç»­åˆ¤æ–­å¾ªçŽ¯è¿›åŽ»
                visitMap.set(nowArr[0], true);
                let tempRes = dfsFind(nowArr[0], aimKey);
                visitMap.set(nowArr[0], false);
                if(tempRes !== -1) {
                    // å½“å‰çš„è·¯å¾„å€¼*åŽç»­çš„è·¯å¾„å€¼
                    return nowArr[1] * tempRes;
                }
            }
        }
        return -1;
    };
    // æž„å»ºå›¾
    for(let i = 0; i < equations.length; i++) {
        let e = equations[i],
            v = values[i];
        if(!eMap.has(e[0])) {
            eMap.set(e[0], []);
            visitMap.set(e[0], false);
        }
        if(!eMap.has(e[1])) {
            eMap.set(e[1], []);
            visitMap.set(e[1], false);
        }
        let edjs1 = eMap.get(e[0]);
        let edjs2 = eMap.get(e[1]);
        edjs1.push( [ e[1], v ] );
        edjs2.push( [ e[0], 1 / v ] );
    }
    for(let i = 0; i < queries.length; i++) {
        let q = queries[i];
        // å‰é¢æž„å»ºå›¾çš„æ—¶å€™å·²ç»ä¼šåŠ å…¥ä¸¤ä¸ªé™¤æ•°è¢«é™¤æ•°çš„èŠ‚ç‚¹äº†ï¼Œå¦‚æžœæœ‰å‡ºçŽ°ä¸€å®šä¼šæˆä¸ºmapçš„key
        // å› æ­¤ä¸¤è€…å¿…é¡»åŒæ—¶å­˜åœ¨æ‰å¯ä»¥ä¿è¯äº’ç›¸è¿žæŽ¥åˆ°
        if(eMap.has(q[0]) && eMap.has(q[1])) {
            visitMap.set(q[0], true);
            resArr.push(dfsFind(q[0], q[1]));
            visitMap.set(q[0], false);
        } else {
            resArr.push(-1);
        }
    }
    return resArr;
};
```