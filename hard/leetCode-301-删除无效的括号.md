*åŸé¢˜é“¾æ¥ï¼šğŸ‘‰ï¼š[åˆ é™¤æ— æ•ˆçš„æ‹¬å·](https://leetcode-cn.com/problems/remove-invalid-parentheses/description/)*

é¢˜ç›®æè¿°:

1. ç»™ä½ ä¸€ä¸ªç”±è‹¥å¹²æ‹¬å·å’Œå­—æ¯ç»„æˆçš„å­—ç¬¦ä¸² s ï¼Œåˆ é™¤æœ€å°æ•°é‡çš„æ— æ•ˆæ‹¬å·ï¼Œä½¿å¾—è¾“å…¥çš„å­—ç¬¦ä¸²æœ‰æ•ˆã€‚

2. è¿”å›æ‰€æœ‰å¯èƒ½çš„ç»“æœã€‚ç­”æ¡ˆå¯ä»¥æŒ‰ ä»»æ„é¡ºåº è¿”å›ã€‚


ç¤ºä¾‹ï¼š

```
è¾“å…¥ï¼šs = "()())()"
è¾“å‡ºï¼š["(())()","()()()"]
```

```
è¾“å…¥ï¼šs = "(a)())()"
è¾“å‡ºï¼š["(a())()","(a)()()"]
```

```
è¾“å…¥ï¼šs = ")("
è¾“å‡ºï¼š[""]
```

æ€è·¯ï¼š

- é¢˜è§£

> æ·±åº¦éå†
> å…·ä½“çš„æƒ…å†µæ­¥éª¤æ˜¯è¿™æ ·çš„ï¼š

1. éå†é‰´åˆ«å‡ºéœ€è¦åˆ é™¤çš„æ‹¬å·ç±»å‹åŠæ•°é‡ï¼Œå·¦æ‹¬å·å‡ ä¸ªå‘¢ï¼Ÿå³æ‹¬å·å‡ ä¸ªå‘¢ï¼Œç”¨`lRemove`ï¼Œ`rRemove`è¡¨ç¤ºã€‚
2. æ·±åº¦éå†çš„æ—¶å€™æ ¹æ®ä¸åŒçš„å¯èƒ½ä¾æ¬¡å‰è¿›ï¼š
  - å¦‚æœéå†åˆ°`(`å·¦æ‹¬å·ï¼Œéœ€è¦åˆ é™¤çš„`lRemove`ä»æœ‰å‰©ä½™ï¼Œé‚£ä¹ˆå¯ä»¥æ­¤ä¸‹æ ‡çš„`(`å¯ä»¥å½“ä½œæ— æ•ˆæ‹¬å·åˆ é™¤å¤„ç†ã€‚
    ```
    if(idxS === '(' && lRemove > 0) {
        dfsValid(idx + 1, hasL, hasR, lRemove - 1, rRemove, nowStr);
    }
    ```
  - å³æ‹¬å·åŒæ ·
    ```
    if(idxS === ')' && rRemove > 0) {
        dfsValid(idx + 1, hasL, hasR, lRemove, rRemove - 1, nowStr);
    }
    ```
  - å¦‚æœæ˜¯éæ‹¬å·ï¼Œé‚£ä¹ˆç›´æ¥åŠ å…¥å³å¯
    ```
    if(idxS !== ')' && idxS !== '(') {
        // éå·¦å³æ‹¬å·ï¼Œæ˜¯å…¶ä»–å­—ç¬¦çš„æƒ…å†µ
        dfsValid(idx + 1, hasL, hasR, lRemove, rRemove, nowStr + idxS);
    } 
    ```
  - å¦‚æœæ˜¯å·¦æ‹¬å·`(`å¹¶ä¸”å·²ç»æ²¡æœ‰å¯ç§»é™¤çš„`lRemove`äº†ï¼Œé‚£ä¹ˆè¿˜æ˜¯åŠ å…¥
    ```
    if (idxS === '(') {
        dfsValid(idx + 1, hasL + 1, hasR, lRemove, rRemove, nowStr + idxS);
    }
    ```
  - å¦‚æœæ˜¯å³æ‹¬å·ï¼Œé‚£ä¹ˆè¦åˆ¤æ–­å½“å‰å¯ä»¥å®¹çº³çš„`hasL`æ•°é‡æ˜¯å¦å¤§äº`hasR`ï¼Œå¦åˆ™ä¼šå‡ºç°`()())()`è¿™ç§æƒ…å†µçš„æ—¶å€™ï¼Œ`id = 4`çš„æ—¶å€™ï¼Œä¼šè¢«åŠ å…¥ï¼Œè€Œæœ€åä¸€ä¸ª`)`æ— æ•ˆï¼Œæ— æ³•æœ‰æ•ˆç»„åˆé€ æˆ`()())(`çš„æƒ…å†µï¼Œå¦‚æœä»¥åæƒ³ä¸èµ·ï¼Œdebuggerä¸€éğŸ‘¨â€ğŸ¦³
    ```
    if (idxS === ')' && hasL > hasR) {
        dfsValid(idx + 1, hasL, hasR + 1, lRemove, rRemove,  nowStr + idxS);
    }
    ```
  - æœ€åï¼Œä½¿ç”¨çš„æ˜¯`Set`å­˜å‚¨ï¼Œå› ä¸ºéœ€è¦å»é‡ã€‚

  
**code**


```
var removeInvalidParentheses = function(s) {
    let len = s.length;
    let validSet = new Set();

    // å½“å‰ä¸‹æ ‡ï¼Œå·²ç»éå†çš„å·¦æ‹¬å·ï¼Œå·²ç»éå†çš„å³æ‹¬å·ï¼Œéœ€è¦åˆ çš„å·¦æ‹¬å·æ•°ï¼Œ éœ€è¦åˆ çš„å³æ‹¬å·æ ‘ï¼Œå­—ç¬¦ç»“æœ
    const dfsValid = (idx, hasL, hasR, lRemove, rRemove, nowStr) => {
        // éå†åˆ°æœ€å
        if(idx === len) {
            if(lRemove === 0 && rRemove === 0) {
                validSet.add(nowStr);
            }
            return ;
        }
        let idxS = s.charAt(idx);
        // å¦‚æœå½“å‰éå†åˆ°å·¦æ‹¬å·ï¼Œå¯åˆ é™¤å·¦æ‹¬å·ä»æœ‰ä½™, é€‰æ‹©ä¸éå†ï¼Œè·³è¿‡
        if(idxS === '(' && lRemove > 0) {
            dfsValid(idx + 1, hasL, hasR, lRemove - 1, rRemove, nowStr);
        }
        // å¦‚æœå½“å‰éå†åˆ°å³æ‹¬å·ï¼Œå¯åˆ é™¤å³æ‹¬å·ä»æœ‰ä½™, é€‰æ‹©ä¸éå†ï¼Œè·³è¿‡
        if(idxS === ')' && rRemove > 0) {
            dfsValid(idx + 1, hasL, hasR, lRemove, rRemove - 1, nowStr);
        }

        if(idxS !== ')' && idxS !== '(') {
            // éå·¦å³æ‹¬å·ï¼Œæ˜¯å…¶ä»–å­—ç¬¦çš„æƒ…å†µ
            dfsValid(idx + 1, hasL, hasR, lRemove, rRemove, nowStr + idxS);
        } 
        if (idxS === '(') {
            dfsValid(idx + 1, hasL + 1, hasR, lRemove, rRemove, nowStr + idxS);
        }
        //  hasL > hasR, è¿™ä¸€åˆ¤æ–­éå¸¸é‡è¦ï¼Œåªæœ‰åˆ¤æ–­äº†(( æ•°é‡è¶³å¤Ÿï¼Œå…è®¸å†åŠ  )çš„æƒ…å†µä¸‹ï¼Œå†å¯ä»¥
        // ä¸ç„¶ä¼š ()())() ä¼šå‡ºç° '()())(' çš„ ç»„åˆ!!
        // if (idxS === ')') {
        if (idxS === ')' && hasL > hasR) {
            dfsValid(idx + 1, hasL, hasR + 1, lRemove, rRemove,  nowStr + idxS);
        }
        nowStr = nowStr.substr(0, nowStr.length - 1);
    }

    let l = 0,
        r = 0;
    // éå†ï¼Œç”¨äºæ±‚å‡ºå¤šä½™çš„æ‹¬å·ï¼Œå·¦æˆ–è€…å³
    for(let i = 0; i < len; i++) {
        // å¦‚æœæ˜¯å·¦æ‹¬å·ï¼ŒåŠ èµ·æ¥
        if(s.charAt(i) === '(') {
            l += 1;
        } else if (s.charAt(i) === ')') {
            // å¦‚æœæ˜¯å³æ‹¬å·ï¼Œå¹¶ä¸”å·¦æ‹¬å·å·²ç»æ²¡äº†ï¼Œåˆ™åŠ 1ï¼Œå› ä¸ºæ˜¯å¤šä½™çš„
            if(l === 0) {
                r += 1;
            } else if (l > 0) {
                // å¦‚æœè¿˜æœ‰å·¦æ‹¬å·ï¼Œè¯æ˜è¿˜å¯ä»¥æŠµæ¶ˆåŒ¹é…æ‰
                l -= 1;
            }
        }
    }
    // å¼€å§‹æ·±åº¦éå†
    dfsValid(0, 0, 0, l, r, '');
    return [...validSet];
};
```