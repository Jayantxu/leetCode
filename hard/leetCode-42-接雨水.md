*åŸé¢˜é“¾æ¥ï¼šğŸ‘‰ï¼š[æ¥é›¨æ°´](https://leetcode-cn.com/problems/trapping-rain-water/description/)*

é¢˜ç›®æè¿°:

1. ç»™å®š n ä¸ªéè´Ÿæ•´æ•°è¡¨ç¤ºæ¯ä¸ªå®½åº¦ä¸º 1 çš„æŸ±å­çš„é«˜åº¦å›¾ï¼Œè®¡ç®—æŒ‰æ­¤æ’åˆ—çš„æŸ±å­ï¼Œä¸‹é›¨ä¹‹åèƒ½æ¥å¤šå°‘é›¨æ°´ã€‚

ç¤ºä¾‹ï¼š
```
è¾“å…¥ï¼šheight = [0,1,0,2,1,0,1,3,2,1,2,1]
è¾“å‡ºï¼š6
è§£é‡Šï¼šä¸Šé¢æ˜¯ç”±æ•°ç»„ [0,1,0,2,1,0,1,3,2,1,2,1] è¡¨ç¤ºçš„é«˜åº¦å›¾ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥æ¥ 6 ä¸ªå•ä½çš„é›¨æ°´ï¼ˆè“è‰²éƒ¨åˆ†è¡¨ç¤ºé›¨æ°´ï¼‰ã€‚
```

æ€è·¯ï¼š
> æŠŠæ•°ç»„æˆ–è€…è‰å›¾ç”»å‡ºæ¥ï¼Œæ‰¾ä¸€ä¸ªé™äº†åˆå‡çš„åŒºé—´ï¼Œä¹˜ä¸Šæœ€å¤§æœ€å°å·®å€¼ï¼Œå°±æ˜¯æ”¹åŒºåŸŸçš„é¢ç§¯ã€‚
> ä¾‹å¦‚`[2,1,0,1,3]`ä¹‹é—´å®¹çº³*4*åŒºåŸŸçš„æ°´ï¼Œå› ä¸ºä»*2*é™åˆ°*0*åˆå‡åˆ°*3*,æ‰€ä»¥è¿™ä¸ªåŒºé—´æ˜¯èƒ½è£…æ°´çš„ã€‚
> èƒ½è£…å¤šå°‘æ°´å‘¢ï¼Ÿ
> å‡è®¾ä¸­é—´æ²¡æœ‰ä»»ä½•é˜»æŒ¡ï¼Œä¹Ÿå°±æ˜¯å»æ‰*1*ï¼Œé‚£ä¹ˆæ•°ç»„å°±æ˜¯`[2,0,0,0,3]`ï¼Œæœ€ä½æ˜¯*0*ï¼Œè¿™ä¸ªåŒºé—´å¯ä»¥è£…*6*ä¸ªé¢ç§¯æ°´ï¼Œç°åœ¨å†åŠ ä¸Šä¸¤ä¸ª*1*é«˜åº¦ï¼Œé‚£ä¹ˆå°±å‡å»*2*ï¼Œäºæ˜¯å°±å‰©ä¸‹*4*é¢ç§¯æ°´...
> åº”è¯¥æ˜¯è¿™æ ·ï¼Œè¯•è¯•çœ‹ğŸ™‹â€â™‚ï¸

ğŸ¤¦â€â™‚ï¸å“­è¾½æ²¡æ€è·¯
çœ‹çœ‹å®˜æ–¹é¢˜è§£ã€‚ã€‚


- å•è°ƒæ ˆ

å’Œæˆ‘è®¡ç®—å…ˆå‡åå¢åŒºé—´å·®ä¸å¤šï¼Œæ„Ÿè§‰ï¼Œå’‹æ²¡æƒ³åˆ°ç”¨æ ˆå‘¢ã€‚
> ä»å·¦å‘å³éå†æ•°ç»„ï¼Œéå†åˆ°ä¸‹æ ‡`i`ï¼Œå¦‚æœæ ˆå†…è‡³å°‘æœ‰ä¸¤ä¸ªå…ƒç´ æ—¶ï¼Œæ ˆé¡¶å…ƒç´ ä¸º*top*ï¼Œ*top*ä¸‹å…ƒç´ ä¸º*left*ï¼Œåˆ™ä¸€å®š**height[left]>=height[top]**(ï¼ï¼å› ä¸ºæ˜¯å‡åŒºé—´)ï¼Œå¦‚æœ**height[i]>height[top]**ï¼Œåˆ™å¾—åˆ°ä¸€ä¸ªæ¥é›¨æ°´åŒºåŸŸï¼Œå®½åº¦æ˜¯`i-left-1`ï¼Œé«˜åº¦æ˜¯`min(height[left], height[i] - height[top])`ã€‚

ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿä¾‹å¦‚ï¼š

[3, 1, 2].

`left`æ˜¯3ï¼Œ`top`æ˜¯1ï¼Œå› æ­¤å½¢æˆä¸€ä¸ªå‡åŒºé—´[3, 1]ï¼Œç„¶åéå†åˆ°`i = 2`ï¼Œ2å¤§äº`top`1ï¼Œæ‰€æœ‰å¼€å§‹ä¸Šå¢äº†ï¼Œè¿™ä¸ªå½¢æˆçš„åŒºé—´å°±å¯ä»¥è£…æ°´ã€‚

çŸ¥é“æ€è·¯äº†ï¼Œè¯•ç€å†™ä¸€ä¸‹ã€‚

```
var trap = function(height) {
    let ans = 0;
    let asnArr = [];
    let hL = height.length;
    for(let i = 0; i < hL; i++) {
        let len = asnArr.length - 1;
        while(asnArr.length && height[i] > height[asnArr[len]]) { // iæ¯”topå¤§
            let topIdx = asnArr.pop();
            if(asnArr.length === 0) { // [0,1,0,2,1,0,1,3,2,1,2,1], i = 1æ—¶ï¼Œ popäº†0ï¼Œæ²¡äº†ï¼Œæ‰€æœ‰è¦åˆ¤æ–­ä¸€ä¸‹len
                break;
            }
            let left = asnArr[asnArr.length - 1]; // å·²ç»popäº†topï¼Œæ‰€æœ‰len - 1 = left
            let width = i -left - 1;
            let ht = Math.min(height[left], height[i]) - height[topIdx];
            ans += width * ht;
            len = asnArr.length - 1;
        }
        asnArr.push(i);
    }
    return ans;
};
```