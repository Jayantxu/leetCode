*åŽŸé¢˜é“¾æŽ¥ï¼šðŸ‘‰ï¼š[äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œ](https://leetcode-cn.com/problems/binary-tree-maximum-path-sum/description/)*

é¢˜ç›®æè¿°:

è·¯å¾„ è¢«å®šä¹‰ä¸ºä¸€æ¡ä»Žæ ‘ä¸­ä»»æ„èŠ‚ç‚¹å‡ºå‘ï¼Œæ²¿çˆ¶èŠ‚ç‚¹-å­èŠ‚ç‚¹è¿žæŽ¥ï¼Œè¾¾åˆ°ä»»æ„èŠ‚ç‚¹çš„åºåˆ—ã€‚åŒä¸€ä¸ªèŠ‚ç‚¹åœ¨ä¸€æ¡è·¯å¾„åºåˆ—ä¸­ è‡³å¤šå‡ºçŽ°ä¸€æ¬¡ ã€‚è¯¥è·¯å¾„ è‡³å°‘åŒ…å«ä¸€ä¸ª èŠ‚ç‚¹ï¼Œä¸”ä¸ä¸€å®šç»è¿‡æ ¹èŠ‚ç‚¹ã€‚

è·¯å¾„å’Œ æ˜¯è·¯å¾„ä¸­å„èŠ‚ç‚¹å€¼çš„æ€»å’Œã€‚

ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œè¿”å›žå…¶ æœ€å¤§è·¯å¾„å’Œ ã€‚

æ³¨æ„:
ä½ å¯ä»¥å‡è®¾æ ‘ä¸­æ²¡æœ‰é‡å¤çš„å…ƒç´ ã€‚

ç¤ºä¾‹ï¼š

![äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œ](https://assets.leetcode.com/uploads/2020/10/13/exx1.jpg)
```
è¾“å…¥ï¼šroot = [1,2,3]
è¾“å‡ºï¼š6
è§£é‡Šï¼šæœ€ä¼˜è·¯å¾„æ˜¯ 2 -> 1 -> 3 ï¼Œè·¯å¾„å’Œä¸º 2 + 1 + 3 = 6
```

![äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œ2](https://assets.leetcode.com/uploads/2020/10/13/exx2.jpg)

```
è¾“å…¥ï¼šroot = [-10,9,20,null,null,15,7]
è¾“å‡ºï¼š42
è§£é‡Šï¼šæœ€ä¼˜è·¯å¾„æ˜¯ 15 -> 20 -> 7 ï¼Œè·¯å¾„å’Œä¸º 15 + 20 + 7 = 42
```
æ€è·¯ï¼š

- é¢˜è§£ï¼Œé€’å½’ï¼Œæ¯ä¸€ä¸ªå°æ ‘çš„å’Œå¯ä»¥ç®—ä¸ºå·¦å­æ ‘çš„è·¯å¾„å’Œ + å³å­æ ‘çš„è·¯å¾„å’Œï¼Œå› æ­¤é€’å½’ç®—èµ·æ¥ï¼Œå†æ±‚è®°å½•æœ€å¤§å€¼å³å¯ã€‚

```
var maxPathSum = function(root) {
    let recordMaxVal = -Infinity;
    const treeDfs = (ROOT) => {
        if(!ROOT) return 0;
        let leftMaxVal = treeDfs(ROOT.left);
        let rightMaxVal = treeDfs(ROOT.right);
        let nowRootVal = ROOT.val + leftMaxVal + rightMaxVal;
        // â‘ 
        recordMaxVal = Math.max(recordMaxVal, nowRootVal);
        // â‘¡
        const recordRootOutMax = ROOT.val + Math.max(leftMaxVal, rightMaxVal);
        // â‘¢
        return recordRootOutMax < 0 ? 0 : recordRootOutMax;
    }
    treeDfs(root);
    return recordMaxVal;
};
```

é¢˜ä¸Šæœ‰ä¸¤ä¸ªæ³¨é‡Šï¼Œ
â‘ ï¼šå› ä¸ºå½“å‰è®¡ç®—çš„è¿™ä¸ªèŠ‚ç‚¹å¯èƒ½æ˜¯æœ€å¤§è·¯å¾„ä¸Šçš„æ ¹èŠ‚ç‚¹ï¼Œå› æ­¤å®ƒå¯ä»¥ä½œä¸ºæœ€å¤§çš„å€¼è¢«ç”¨æ¥è®¡ç®—ã€‚

â‘¡ï¼šå¦‚æžœå½“å‰è¿™ä¸ª`ROOT`èŠ‚ç‚¹ä¸æ˜¯æœ€å¤§è·¯å¾„çš„æ ¹èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå·¦å³ä¸¤ä¸ªèŠ‚ç‚¹ä¹Ÿåªèƒ½æ˜¯è·¯å¾„çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œå› æ­¤æš´éœ²å‡ºåŽ»çš„èŠ‚ç‚¹å€¼ï¼Œåªèƒ½ä»Žä¸­äºŒé€‰ä¸€ï¼Œå› æ­¤`Math.max(leftMaxVal, rightMaxVal)`ã€‚

â‘¢ï¼šå¦‚æžœå½“å‰èŠ‚ç‚¹æš´éœ²çš„å€¼`å°äºŽ0`çš„è¯ï¼Œé‚£ä¹ˆå¤–å–çš„å€¼åŠ å®ƒçš„è¯ï¼Œè®¡ç®—å‡ºæ¥ä¼šæ›´å°ï¼Œå› æ­¤ç›´æŽ¥è®¡ç®—ä¸º0ã€‚