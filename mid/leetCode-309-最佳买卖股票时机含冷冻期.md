*åŽŸé¢˜é“¾æŽ¥ï¼šðŸ‘‰ï¼š[æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸ](https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/description/)*

é¢˜ç›®æè¿°:

1. ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œå…¶ä¸­ç¬¬ i ä¸ªå…ƒç´ ä»£è¡¨äº†ç¬¬ i å¤©çš„è‚¡ç¥¨ä»·æ ¼ ã€‚â€‹

2. è®¾è®¡ä¸€ä¸ªç®—æ³•è®¡ç®—å‡ºæœ€å¤§åˆ©æ¶¦ã€‚åœ¨æ»¡è¶³ä»¥ä¸‹çº¦æŸæ¡ä»¶ä¸‹ï¼Œä½ å¯ä»¥å°½å¯èƒ½åœ°å®Œæˆæ›´å¤šçš„äº¤æ˜“ï¼ˆå¤šæ¬¡ä¹°å–ä¸€æ”¯è‚¡ç¥¨ï¼‰:

3. ä½ ä¸èƒ½åŒæ—¶å‚ä¸Žå¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æŽ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚å–å‡ºè‚¡ç¥¨åŽï¼Œä½ æ— æ³•åœ¨ç¬¬äºŒå¤©ä¹°å…¥è‚¡ç¥¨ (å³å†·å†»æœŸä¸º 1 å¤©)ã€‚

æ€è·¯ï¼š

> åŠ¨æ€è§„åˆ’ï¼ŒçŸ¥é“æ˜¯åŠ¨æ€è§„åˆ’ï¼Œä½†æ˜¯ä¸çŸ¥é“æ€Žä¹ˆåŠ¨æ€è§„åˆ’ðŸ˜¥
> ä¸€å¼€å§‹è‡ªå·±åˆ—çš„çŠ¶æ€æ˜¯ä¸‰ç§ï¼Œ`in`ã€`freeze`ã€`out`ä¸‰ä¸ªçŠ¶æ€ï¼Œä½†æ˜¯æ²¡èƒ½æƒ³çš„æ€Žä¹ˆè½¬ç§»ðŸ˜­

- é¢˜è§£ï¼š

å°†æ¯ä¸€å¤©ä½œä¸ºä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„å†…ä¸‰ä¸ªå€¼ï¼Œ`0,1,2`åˆ†åˆ«æ„å‘³ç€:

    - 0ï¼š æŒæœ‰è‚¡ç¥¨
    - 1ï¼šä¸æŒæœ‰è‚¡ç¥¨ï¼Œå–å‡ºï¼Œæ˜¯å†·å†»æœŸ
    - 2ï¼š ä¸æŒæœ‰è‚¡ç¥¨ï¼Œä¸æ˜¯å†·å†»æœŸ
å¯¹åº”çš„è½¬ç§»æ–¹ç¨‹å³æœ‰ä¸‰ç§ã€‚

    - 0çš„æƒ…å†µä¸‹ï¼šæŒæœ‰è‚¡ç¥¨ï¼Œå¯ä»¥åˆ†ä¸ºä¸¤ç§æƒ…å†µ
        - â‘ ã€å‰ä¸€å¤©ä¹ŸæŒæœ‰çš„
        - â‘¡ã€ä»Šå¤©ä¹°å…¥çš„
        - Math.max(dp[i-1][0], dp[i-1][2] - prices[i])
    - 1çš„æƒ…å†µä¸‹ï¼šå–å‡ºè‚¡ç¥¨ï¼Œé‚£ä¹ˆå°±èŽ·å¾—åˆ©ç›Š
        - dp[i-1][0]+prices[i]
    - 2çš„æƒ…å†µä¸‹ï¼šå†·å†»æœŸå‘¢ï¼Œä¹Ÿæœ‰ä¸¤ç§æƒ…å†µ
        - â‘ ã€å‰ä¸€å¤©å–å‡ºèŽ·å¾—çš„æ”¶ç›Šï¼Œæˆ–è€…å‰ä¸€å¤©ä¸æ“ä½œç»§æ‰¿çš„æ”¶ç›Š
        - Math.max(dp[i-1][1], dp[i-1][2])

*å…¶å®žæ„Ÿè§‰å®˜æ–¹ç»“æŸåˆ’åˆ†çš„æ˜¯å†·å†»æœŸï¼Œéžå†·å†»æœŸçš„ä¸‰ä¸ªçŠ¶æ€ï¼Œæœ‰ç‚¹ä¸å¦‚ï¼Œå–ï¼Œä¹°ï¼Œå†»ç»“ï¼ˆä¸æ“ä½œï¼‰ï¼Œè¿™æ ·å­åˆ’åˆ†å¥½*

**code**
```
var maxProfit = function(prices) {
    // f[i][0]: æ‰‹ä¸ŠæŒæœ‰è‚¡ç¥¨çš„æœ€å¤§æ”¶ç›Š
    // f[i][1]: æ‰‹ä¸Šä¸æŒæœ‰è‚¡ç¥¨ï¼Œå¹¶ä¸”å¤„äºŽå†·å†»æœŸä¸­çš„ç´¯è®¡æœ€å¤§æ”¶ç›Š
    // f[i][2]: æ‰‹ä¸Šä¸æŒæœ‰è‚¡ç¥¨ï¼Œå¹¶ä¸”ä¸åœ¨å†·å†»æœŸä¸­çš„ç´¯è®¡æœ€å¤§æ”¶ç›Š
    let dp = new Array(prices.length).fill(0).map(_=>new Array(3).fill(0))
    dp[0] = [-prices[0], 0, 0];
    for(let i = 1; i < prices.length; i++) {
        // ç¬¬iå¤©è®¡åˆ’ä¹°å…¥ï¼Œå› æ­¤å°±æ˜¯å‰ä¸€å¤©éžå†·å†»æƒ…å†µä¸‹å‡åŽ»ä»Šå¤©ä»·æ ¼
        dp[i][0] = Math.max(dp[i-1][0], dp[i-1][2]-prices[i]);
        // å†·å†»æœŸå‰å–å‡ºï¼Œå‰ä¸€å¤©æŒæœ‰çš„æƒ…å†µä¸‹åŠ ä»Šå¤©å–å‡ºä»·æ ¼
        dp[i][1] = dp[i-1][0]+prices[i];
        // å†·å†»æœŸè¿™ä¸€å¤©çš„æ”¶ç›Šï¼Œè¦ä¹ˆç»§æ‰¿å‰ä¸€å¤©å–å‡ºçš„ä»·æ ¼ï¼Œè¦ä¹ˆç»§æ‰¿å‰ä¸€å¤©å†·å†»çš„ä»·æ ¼
        dp[i][2] = Math.max(dp[i-1][1], dp[i-1][2]);
    }
    return Math.max(dp[prices.length - 1][1], dp[prices.length -  1][2]);
};
```