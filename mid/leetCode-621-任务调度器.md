*åŸé¢˜é“¾æ¥ï¼šğŸ‘‰ï¼š[ä»»åŠ¡è°ƒåº¦å™¨](https://leetcode-cn.com/problems/task-scheduler/description/)*

é¢˜ç›®æè¿°:

1. ç»™ä½ ä¸€ä¸ªç”¨å­—ç¬¦æ•°ç»„ tasks è¡¨ç¤ºçš„ CPU éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡åˆ—è¡¨ã€‚å…¶ä¸­æ¯ä¸ªå­—æ¯è¡¨ç¤ºä¸€ç§ä¸åŒç§ç±»çš„ä»»åŠ¡ã€‚ä»»åŠ¡å¯ä»¥ä»¥ä»»æ„é¡ºåºæ‰§è¡Œï¼Œå¹¶ä¸”æ¯ä¸ªä»»åŠ¡éƒ½å¯ä»¥åœ¨ 1 ä¸ªå•ä½æ—¶é—´å†…æ‰§è¡Œå®Œã€‚åœ¨ä»»ä½•ä¸€ä¸ªå•ä½æ—¶é—´ï¼ŒCPU å¯ä»¥å®Œæˆä¸€ä¸ªä»»åŠ¡ï¼Œæˆ–è€…å¤„äºå¾…å‘½çŠ¶æ€ã€‚

2. ç„¶è€Œï¼Œä¸¤ä¸ª ç›¸åŒç§ç±» çš„ä»»åŠ¡ä¹‹é—´å¿…é¡»æœ‰é•¿åº¦ä¸ºæ•´æ•° n çš„å†·å´æ—¶é—´ï¼Œå› æ­¤è‡³å°‘æœ‰è¿ç»­ n ä¸ªå•ä½æ—¶é—´å†… CPU åœ¨æ‰§è¡Œä¸åŒçš„ä»»åŠ¡ï¼Œæˆ–è€…åœ¨å¾…å‘½çŠ¶æ€ã€‚

ä½ éœ€è¦è®¡ç®—å®Œæˆæ‰€æœ‰ä»»åŠ¡æ‰€éœ€è¦çš„ æœ€çŸ­æ—¶é—´ ã€‚

ç¤ºä¾‹ 1ï¼š

```
è¾“å…¥ï¼štasks = ["A","A","A","B","B","B"], n = 2
è¾“å‡ºï¼š8
è§£é‡Šï¼šA -> B -> (å¾…å‘½) -> A -> B -> (å¾…å‘½) -> A -> B
     åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œä¸¤ä¸ªç›¸åŒç±»å‹ä»»åŠ¡ä¹‹é—´å¿…é¡»é—´éš”é•¿åº¦ä¸º n = 2 çš„å†·å´æ—¶é—´ï¼Œè€Œæ‰§è¡Œä¸€ä¸ªä»»åŠ¡åªéœ€è¦ä¸€ä¸ªå•ä½æ—¶é—´ï¼Œæ‰€ä»¥ä¸­é—´å‡ºç°äº†ï¼ˆå¾…å‘½ï¼‰çŠ¶æ€ã€‚ 
```

```
è¾“å…¥ï¼štasks = ["A","A","A","A","A","A","B","C","D","E","F","G"], n = 2
è¾“å‡ºï¼š16
è§£é‡Šï¼šä¸€ç§å¯èƒ½çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼š
     A -> B -> C -> A -> D -> E -> A -> F -> G -> A -> (å¾…å‘½) -> (å¾…å‘½) -> A -> (å¾…å‘½) -> (å¾…å‘½) -> A

```
æ€è·¯ï¼š

> æŸ¥çœ‹æ³¨é‡Šï¼Œç»´æŠ¤ä¸€ä¸ªç±»å‹ç±»å‹çš„`keValue`å¯¹è±¡ï¼Œè®°å½•ä»»åŠ¡å‰©ä½™æ•°åŠå†·å´å‰©ä½™æ•°

```
var leastInterval = function(tasks, n) {
    // å¦‚æœä¸éœ€è¦è°ƒåº¦çš„é—´éš”æ—¶é—´ï¼Œé‚£ä¹ˆä»»åŠ¡æ‰§è¡Œæ—¶é—´å°±æ˜¯ä»»åŠ¡æ•°
    if(!n) return tasks.length;
    let totalTime = 0; // æ‰§è¡Œçš„æ€»æ—¶é•¿
    let finishTaskNum = 0; // å®Œæˆä»»åŠ¡çš„æ•°é‡
    // ç»Ÿè®¡ä»»åŠ¡ç±»å‹åŠç›¸åº”æ•°é‡
    // æ¯ä¸ªç±»å‹å¯¹åº”ä¸€ä¸ªæ•°ç»„ï¼Œ0ï¼šä»»åŠ¡æ•°é‡ï¼Œ1ï¼šç­‰å¾…çš„å†·å´æ—¶é—´
    let taskType = {};
    for(let iTask of tasks) {
        taskType[iTask] ? taskType[iTask][0]++ : taskType[iTask] = [1, 0];
    }
    while(finishTaskNum < tasks.length) {
        let maxTaskNum = 0,
            selTask = -1;
        // éå†ä»»åŠ¡ï¼Œé€‰å‡ºå½“å‰ä»»åŠ¡æ•°è¿˜æœ‰æœ€å¤šçš„ä»»åŠ¡ï¼Œå¹¶ä¸”å‡å°‘å†·å´æ—¶é—´
        for(let i in taskType) {
            // å‡å°‘å†·å´æ—¶é—´
            if(taskType[i][1]) {
                taskType[i][1] -= 1;
            } else {
                // è¯†åˆ«ä»»åŠ¡æ•°å‰©æœ€å¤šçš„ä»»åŠ¡
                if(taskType[i][0] > maxTaskNum) {
                    maxTaskNum = taskType[i][0];
                    selTask = i;
                }
            }
        }
        if(selTask !== -1) {
            if(taskType[selTask][0] === 1) {
                delete taskType[selTask];
            } else {
                taskType[selTask][0] -= 1;
                taskType[selTask][1] = n;
            }
            finishTaskNum += 1;
        }
        totalTime += 1;
    }
    return totalTime;
};
```